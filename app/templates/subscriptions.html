<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta charset="UTF-8">
    <title>Abonelikler</title>
</head>
<body>
    <div class="navbar">
        <div><a href="/">Anasayfa</a></div>
        <div>
            <a href="/customers">Müşteriler</a>
            <a href="/vehicles">Araçlar</a>
            <a href="/entry_exit">Giriş/Çıkış</a>
            <a href="/subscriptions">Abonelikler</a>
            <a href="/payments">Ödemeler</a>
            {% if session.get("admin_id") %}
                <a href="/add-sample-data">Veri Ekle</a>
                <a href="{{ url_for('auth.logout') }}">Çıkış</a>
            {% elif session.get("plaka") %}
                <a href="{{ url_for('auth.user_logout') }}">Çıkış</a>
            {% endif %}
        </div>
    </div>

    <h1>Abonelik Listesi</h1>
    {% if abonelikler %}
    <table border="1" cellpadding="5" cellspacing="0">
        <tr>
            <th>ID</th>
            <th>Müşteri ID</th>
            <th>Başlangıç Tarihi</th>
            <th>Bitiş Tarihi</th>
            <th>Abonelik Tipi</th>
            <th>İşlemler</th>
        </tr>
        {% for a in abonelikler %}
        <tr>
            <td>{{ a.id }}</td>
            <td>{{ a.musteri_id }}</td>
            <td>{{ a.baslangic_tarihi|format_date }}</td>
            <td>{{ a.bitis_tarihi|format_date }}</td>
            <td>{{ a.abonelik_tipi }}</td>
            <td>
                <a href="{{ url_for('main.edit_subscription', id=a.id) }}">Düzenle</a> |
                <form method="POST" action="{{ url_for('main.delete_subscription', id=a.id) }}" style="display:inline;" onsubmit="return confirm('Silmek istediğinize emin misiniz?');">
                    <button type="submit">Sil</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>Abonelik bulunamadı.</p>
    {% endif %}
</body>
</html>
